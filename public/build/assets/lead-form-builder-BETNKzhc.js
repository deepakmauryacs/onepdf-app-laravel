document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("field-palette"),l=document.getElementById("builder-canvas"),p=document.getElementById("fields-input");let r=window.existingFields||[];function c(){l.innerHTML="",r.forEach((e,t)=>{const n=document.createElement("div");n.className="mb-3";const s=document.createElement("label");s.textContent=e.label||e.type,n.appendChild(s);let a;e.type==="textarea"?a=document.createElement("textarea"):(a=document.createElement("input"),a.type=e.type),a.className="form-control",n.appendChild(a);const d=document.createElement("button");d.type="button",d.className="btn btn-sm btn-danger mt-1",d.textContent="Remove",d.addEventListener("click",()=>{r.splice(t,1),c()}),n.appendChild(d),l.appendChild(n)}),p.value=JSON.stringify(r)}c(),o.querySelectorAll(".draggable-field").forEach(e=>{e.addEventListener("dragstart",t=>{t.dataTransfer.setData("type",e.dataset.type)})}),l.addEventListener("dragover",e=>e.preventDefault()),l.addEventListener("drop",e=>{e.preventDefault();const t=e.dataTransfer.getData("type");r.push({type:t,label:t.charAt(0).toUpperCase()+t.slice(1)}),c()})});
